<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>가자연세병원 연차관리 시스템 - 로그인</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ✅ Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ✅ lucide 아이콘 -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body {
      background: radial-gradient(circle at top, #e0f2fe 0, #f8fafc 45%, #ffffff 100%);
      min-height: 100vh;
    }

    /* 부드러운 카드 그림자 */
    .soft-shadow {
      box-shadow:
        0 10px 15px -3px rgba(15, 23, 42, 0.08),
        0 4px 6px -2px rgba(15, 23, 42, 0.03);
    }

    /* 입력창 포커스 효과 */
    .input-focus:focus {
      outline: none;
      box-shadow:
        0 0 0 1px rgba(59, 130, 246, 0.4),
        0 4px 10px rgba(59, 130, 246, 0.15);
      border-color: rgba(59, 130, 246, 0.7);
    }
  </style>
</head>
<body class="flex items-center justify-center px-4 py-6 sm:py-10">

  <div class="w-full max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10 items-center">
    <!-- 왼쪽 : 소개 섹션 -->
    <div class="hidden md:block space-y-5 text-left">
      <div class="inline-flex items-center px-3 py-1 rounded-full bg-sky-50 border border-sky-100 text-xs text-sky-700 mb-2">
        <i data-lucide="calendar-clock" class="w-4 h-4 mr-1.5"></i>
        <span>가자연세병원 · 연차·근무 일정 관리 시스템</span>
      </div>
      <div class="hidden md:block">
      <h1 class="text-3xl sm:text-4xl font-extrabold text-slate-800 leading-tight">
        연차 관리도,<br class="hidden sm:block">
        <span class="text-sky-600">이제는 한 눈에.</span>
      </h1>

      <p class="text-sm sm:text-base text-slate-600 leading-relaxed">
        연차·대체휴무·탄력근무까지 한 번에 관리하는<br class="hidden sm:block">
        <span class="font-semibold text-sky-700">가자연세병원 전용 연차관리 시스템</span> 입니다.<br>
        부서별 관리자와 사용자가 함께 쓰는 통합 플랫폼으로,<br class="hidden sm:block">
        보다 <span class="font-semibold">투명하고 편리한 근무 일정 관리</span>를 도와줍니다.
      </p>

      <!-- 장점 리스트 -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-left text-xs sm:text-sm">
        <div class="flex items-start gap-2">
          <div class="mt-0.5 rounded-full bg-sky-100 p-1.5">
            <i data-lucide="check-circle-2" class="w-4 h-4 text-sky-600"></i>
          </div>
          <div>
            <p class="font-semibold text-slate-800">부서별 연차/근무 현황</p>
            <p class="text-slate-500">부서별 특성에 맞춘 근무 현황 </p>
          </div>
        </div>
        <div class="flex items-start gap-2">
          <div class="mt-0.5 rounded-full bg-emerald-50 p-1.5">
            <i data-lucide="shield-check" class="w-4 h-4 text-emerald-600"></i>
          </div>
          <div>
            <p class="font-semibold text-slate-800">관리자 승인 기능</p>
            <p class="text-slate-500">부서별 관리자에 의한 휴가 승인·관리</p>
          </div>
        </div>
        <div class="flex items-start gap-2">
          <div class="mt-0.5 rounded-full bg-indigo-50 p-1.5">
            <i data-lucide="calendar-range" class="w-4 h-4 text-indigo-600"></i>
          </div>
          <div>
            <p class="font-semibold text-slate-800">캘린더 기반 UI</p>
            <p class="text-slate-500">PC · 모바일 모두 최적화된 일정 확인</p>
          </div>
        </div>
        <div class="flex items-start gap-2">
          <div class="mt-0.5 rounded-full bg-amber-50 p-1.5">
            <i data-lucide="file-spreadsheet" class="w-4 h-4 text-amber-600"></i>
          </div>
          <div>
            <p class="font-semibold text-slate-800">엑셀 근무표 출력</p>
            <p class="text-slate-500">부서별 템플릿으로 근무표 자동 생성</p>
          </div>
        </div>
      </div>

      <p class="text-xs text-slate-400 mt-1">
        ※ 아이디/비밀번호 및 부서 선택은 관리자에게 문의해주세요.
      </p>
    </div>
    </div>

    <!-- 오른쪽 : 로그인 카드 -->
    <div class="bg-white/95 rounded-2xl soft-shadow border border-sky-100 p-5 sm:p-6">
      <!-- 로고/제목 -->
      <div class="flex items-center justify-between mb-5">
        <div class="flex items-center gap-2">
          <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center shadow-md">
            <i data-lucide="stethoscope" class="w-5 h-5 text-white"></i>
          </div>
          <div>
            <p class="text-xs font-semibold text-sky-600 tracking-wide">GAJA YONSEI HOSPITAL</p>
            <h2 class="text-lg sm:text-xl font-bold text-slate-800 leading-tight">
              연차관리 시스템 로그인
            </h2>
          </div>
        </div>
      </div>

      {% if error %}
      <div class="mb-4 rounded-xl border border-rose-200 bg-rose-50 px-3 py-2.5 flex items-start gap-2 text-xs text-rose-700">
        <i data-lucide="alert-triangle" class="w-4 h-4 mt-0.5"></i>
        <p>{{ error }}</p>
      </div>
      {% endif %}

      <!-- ✅ 여기: Blueprint용 login 엔드포인트로 변경 -->
      <form method="POST" action="{{ url_for('auth.login') }}" class="space-y-5">
        <!-- 부서 선택 -->
        <div>
          <label class="block text-sm font-medium text-slate-600 mb-1">부서 선택</label>
          <div class="relative">
            <select name="department" id="departmentSelect"
                    class="appearance-none w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-xl px-3 py-2.5 text-sm text-slate-800 input-focus pr-9">
              <option value="">부서를 선택하세요</option>
              <option value="의료진">의료진</option>
              <option value="임원진">임원진</option>
              <option value="수술실">수술실</option>
              <option value="물리치료">물리치료</option>
              <option value="도수">도수</option>
              <option value="외래">외래</option>
              <option value="영상의학과">영상의학과</option>
              <option value="원무과">원무과</option>
              <option value="병동">병동</option>
              <option value="총무과">총무과</option>
              <option value="심사과">심사과</option>
              <option value="홍보">홍보</option>
              <option value="진단검사">진단검사</option>
              <option value="상담실">상담실</option>
              <option value="영양">영양</option>
            </select>
            <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none"></i>
          </div>
        </div>

        <!-- 아이디 -->
        <div>
          <label class="block text-sm font-medium text-slate-600 mb-1">아이디</label>
          <input type="text" name="username" id="username"
                 value="{{ saved_username or '' }}"
                 required
                 class="w-full border border-sky-200 rounded-xl px-3 py-2.5 text-sm text-slate-800 input-focus bg-white/80"
                 placeholder="사번 또는 부여받은 아이디를 입력하세요">
        </div>

        <!-- 비밀번호 -->
        <div>
          <label class="block text-sm font-medium text-slate-600 mb-1">비밀번호</label>
          <div class="relative">
            <input type="password" name="password" id="password" required
                   class="w-full border border-sky-200 rounded-xl px-3 py-2.5 text-sm text-slate-800 input-focus bg-white/80 pr-10"
                   placeholder="비밀번호를 입력하세요">
            <button type="button" id="togglePassword"
                    class="absolute inset-y-0 right-0 flex items-center px-3 text-slate-400 hover:text-slate-600 text-xs">
              <i data-lucide="eye" class="w-4 h-4" id="togglePasswordIcon"></i>
            </button>
          </div>
        </div>

        <!-- 아이디 저장 / 안내 -->
        <div class="flex items-center justify-between text-xs text-slate-500">
          <label class="inline-flex items-center gap-1.5 cursor-pointer select-none">
            <input type="checkbox" name="remember_id" id="remember_id"
                   class="rounded border-slate-300 text-sky-600 focus:ring-sky-500"
                   {% if saved_username %}checked{% endif %}>
            <span>아이디 기억하기</span>
          </label>
          <span class="text-[11px] text-slate-400">
            공용 PC에서는 사용을 권장하지 않습니다.
          </span>
        </div>

        <!-- 로그인 버튼 -->
        <button type="submit"
                class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white text-sm font-semibold py-2.5 shadow-md hover:from-sky-600 hover:to-sky-700 transition-all">
          <i data-lucide="log-in" class="w-4 h-4"></i>
          <span>로그인</span>
        </button>
      </form>

      <!-- 하단 안내 -->
      <div class="mt-5 border-t border-slate-100 pt-4 space-y-1.5">
        <p class="text-xs text-slate-500 flex items-center gap-1">
          <i data-lucide="info" class="w-3.5 h-3.5 text-sky-500"></i>
          <span>최초 로그인 계정은 부서별 관리자에게 문의해주세요.</span>
        </p>
        <p class="text-[11px] text-slate-400">
          사용 중 문제가 발생하면, 시스템 관리자에게 스크린샷과 함께 문의해 주세요.
        </p>
      </div>
    </div>
  </div>

  <script>
    // lucide 아이콘 활성화
    lucide.createIcons();

    // 비밀번호 표시 토글
    const togglePasswordBtn = document.getElementById("togglePassword");
    const passwordInput = document.getElementById("password");
    const togglePasswordIcon = document.getElementById("togglePasswordIcon");

    if (togglePasswordBtn && passwordInput && togglePasswordIcon) {
      togglePasswordBtn.addEventListener("click", () => {
        const isHidden = passwordInput.type === "password";
        passwordInput.type = isHidden ? "text" : "password";
        togglePasswordIcon.setAttribute("data-lucide", isHidden ? "eye-off" : "eye");
        lucide.createIcons();
      });
    }
    // 페이지 로드 시 저장된 부서 불러오기
    document.addEventListener("DOMContentLoaded", function () {
        const savedDept = localStorage.getItem("selected_department");
        if (savedDept) {
            const select = document.getElementById("departmentSelect");
            if (select) {
                select.value = savedDept;
            }
        }

        // 부서 선택 시 자동 저장
        const deptSelect = document.getElementById("departmentSelect");
        if (deptSelect) {
            deptSelect.addEventListener("change", function () {
                localStorage.setItem("selected_department", deptSelect.value);
            });
        }
    });
  </script>

</body>
</html>
