{% extends "base.html" %}
{% block title %}직원 정보 수정{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg border border-sky-100 py-4 px-4 mt-[0px] sm:mt-[8px] md:mt-[8px]">
  <h2 class="text-xl font-bold text-slate-800 mb-6 text-center">직원 정보 수정</h2>

  <form method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-5">

    <!-- ✅ 부서 선택 + 아이디 (같은 행) -->
    <div class="flex flex-col md:flex-row md:items-end md:space-x-4 md:col-span-2">
      {% if current_user.is_superadmin %}
      <!-- 부서 선택 -->
      <div class="flex-1">
        <label class="block text-sm font-medium text-slate-600 mb-1">부서 선택</label>
        <div class="relative">
          <select name="department" required
                  class="appearance-none w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition">
            {% for d in dept_list %}
              <option value="{{ d }}" {% if d == employee.department %}selected{% endif %}>{{ d }}</option>
            {% endfor %}
          </select>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2"
               class="absolute right-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-sky-500 pointer-events-none">
            <path d="m6 9 6 6 6-6" />
          </svg>
        </div>
      </div>
      {% else %}
      <div class="flex-1">
        <label class="block text-sm font-medium text-slate-600 mb-1">부서</label>
        <input type="text" value="{{ employee.department }}" disabled
               class="w-full border border-sky-100 rounded-lg px-3 py-2 text-sm bg-slate-50 text-slate-600 shadow-inner">
        <input type="hidden" name="department" value="{{ employee.department }}">
      </div>
      {% endif %}

      <!-- 아이디 -->
      <div class="flex-1 mt-4 md:mt-0">
        <label class="block text-sm font-medium text-slate-600 mb-1">아이디</label>
        <input type="text" name="username" value="{{ employee.username }}"
               class="w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition" required>
      </div>
    </div>

    <!-- ✅ 성 / 이름 분리 -->
    <div>
      <label class="block text-sm font-medium text-slate-600 mb-1">성</label>
      <input type="text" name="last_name" value="{{ employee.last_name or '' }}"
             class="w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition" required>
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-600 mb-1">이름</label>
      <input type="text" name="first_name" value="{{ employee.first_name or '' }}"
             class="w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition" required>
    </div>

    <!-- ✅ 생일 -->
    <div>
      <label class="block text-sm font-medium text-slate-600 mb-1">생일</label>
      <input type="date" name="birthday" value="{{ employee.birthday or '' }}"
             class="w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition">
    </div>

    <!-- ✅ 입사일 -->
    <div>
      <label class="block text-sm font-medium text-slate-600 mb-1">입사일</label>
      <input type="date" name="join_date" value="{{ employee.join_date }}"
             class="w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition" required>
    </div>

    <!-- ✅ 주소 -->
    <div class="md:col-span-2">
      <label class="block text-sm font-medium text-slate-600 mb-1">주소</label>
      <input type="text" name="address" value="{{ employee.address or '' }}"
             class="w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition">
    </div>

    <!-- ✅ 시스템 도입 이전 사용 연차 -->
    <div class="md:col-span-2">
      <label class="block text-sm font-medium text-slate-600 mb-1">시스템 도입 이전 사용 연차</label>
      <input type="number" step="0.25" name="used_before_system"
             value="{{ employee.used_before_system or 0 }}"
             class="w-full border border-sky-200 bg-gradient-to-r from-sky-50 to-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition">
      <p class="text-xs text-slate-400 mt-1">예: 시스템 도입 이전에 사용한 연차 수를 입력하세요.</p>
    </div>

    <!-- ✅ 버튼 -->
    <div class="md:col-span-2 flex justify-between items-center mt-6">
      <a href="{{ url_for('employee.employee_list') }}"
         class="text-slate-500 hover:text-sky-600 text-sm">← 돌아가기</a>
      <button type="submit"
              class="bg-sky-600 hover:bg-sky-700 text-white text-sm font-medium px-6 py-2 rounded-lg shadow-md transition">
        수정 저장
      </button>
    </div>
  </form>
</div>
{% endblock %}
